<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout}">
<head>
  <meta charset="UTF-8">
  <title>Title</title>
  <style>
    .legal-border {
            border-left: 4px solid #9b2f2f;
        }

        .status-badge {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .tab-active {
            border-bottom: 3px solid #9b2f2f;
            color: #2c3b4e;
            font-weight: 600;
        }

        .modal {
            transition: opacity 0.25s ease;
        }

        .case-type-card {
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .case-type-card:hover {
            transform: scale(1.03);
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1);
        }

        .case-type-card.selected {
            border: 2px solid #9b2f2f;
            background-color: #fdf5f5;
        }

        .error-message {
            color: #e53e3e;
            font-size: 0.75rem;
            margin-top: 0.25rem;
            display: none;
        }

        .input-error {
            border-color: #e53e3e;
        }

        .form-group {
            margin-bottom: 1rem;
        }

        .form-row {
            display: flex;
            flex-wrap: wrap;
            margin-right: -0.5rem;
            margin-left: -0.5rem;
        }

        .form-col {
            flex: 1 0 0%;
            padding-right: 0.5rem;
            padding-left: 0.5rem;
            margin-bottom: 1rem;
        }

        .btn-disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        @media (max-width: 640px) {
            .stat-card {
                padding: 1rem;
            }

            .stat-card .text-2xl {
                font-size: 1.5rem;
            }

            .case-card {
                padding: 1rem;
            }

            .case-card .text-lg {
                font-size: 1.125rem;
            }

            .modal-content {
                margin: 1rem;
                width: calc(100% - 2rem);
            }

            .form-col {
                flex: 0 0 100%;
            }
        }

        @media (max-width: 480px) {
            .stats-grid {
                grid-template-columns: 1fr 1fr;
            }

            .cases-grid {
                grid-template-columns: 1fr;
            }

            .case-type-grid {
                grid-template-columns: 1fr;
            }

            .modal-buttons {
                flex-direction: column;
                gap: 0.5rem;
            }

            .modal-buttons button {
                width: 100%;
            }
        }
  </style>
</head>
<body>
<main layout:fragment="content">
  <!-- Header Section -->
  <div class="mb-6 lg:mb-8 animate-fade-in">
    <div class="page-header flex justify-between items-start lg:items-center">
      <div>
        <h1 class="text-2xl lg:text-3xl font-bold text-primary font-serif">Projects</h1>
        <p class="text-legal-navy-600 mt-2">Manage all M&A projects and track their progress</p>
      </div>
      <button id="newCaseBtn" class="bg-legal-burgundy-600 hover:bg-legal-burgundy-700 text-white px-4 py-2 rounded-lg transition-colors duration-200 flex items-center mt-4 lg:mt-0">
        <i class="fas fa-plus mr-2"></i> New Project
      </button>
    </div>
  </div>

  <!-- Case Statistics -->
  <div class="stats-grid grid grid-cols-2 md:grid-cols-4 gap-4 mb-6 lg:mb-8">
    <div class="bg-white rounded-lg p-4 border border-legal-ivory-400 shadow-sm">
      <div class="flex justify-between items-center">
        <div>
          <p class="text-legal-navy-500 text-sm">Total Projects</p>
          <p class="text-xl lg:text-2xl font-bold text-legal-navy-900">36</p>
        </div>
        <div class="w-8 h-8 lg:w-10 lg:h-10 rounded-full bg-legal-navy-100 flex items-center justify-center">
          <i class="fas fa-folder-open text-legal-navy-600 text-sm lg:text-base"></i>
        </div>
      </div>
    </div>
    <div class="bg-white rounded-lg p-4 border border-legal-ivory-400 shadow-sm">
      <div class="flex justify-between items-center">
        <div>
          <p class="text-legal-navy-500 text-sm">Active Projects</p>
          <p class="text-xl lg:text-2xl font-bold text-legal-navy-900">24</p>
        </div>
        <div class="w-8 h-8 lg:w-10 lg:h-10 rounded-full bg-legal-burgundy-100 flex items-center justify-center">
          <i class="fas fa-tasks text-legal-burgundy-600 text-sm lg:text-base"></i>
        </div>
      </div>
    </div>
    <div class="bg-white rounded-lg p-4 border border-legal-ivory-400 shadow-sm">
      <div class="flex justify-between items-center">
        <div>
          <p class="text-legal-navy-500 text-sm">Completed</p>
          <p class="text-xl lg:text-2xl font-bold text-legal-navy-900">12</p>
        </div>
        <div class="w-8 h-8 lg:w-10 lg:h-10 rounded-full bg-green-100 flex items-center justify-center">
          <i class="fas fa-check-circle text-green-600 text-sm lg:text-base"></i>
        </div>
      </div>
    </div>
    <div class="bg-white rounded-lg p-4 border border-legal-ivory-400 shadow-sm">
      <div class="flex justify-between items-center">
        <div>
          <p class="text-legal-navy-500 text-sm">Pending Review</p>
          <p class="text-xl lg:text-2xl font-bold text-legal-navy-900">8</p>
        </div>
        <div class="w-8 h-8 lg:w-10 lg:h-10 rounded-full bg-amber-100 flex items-center justify-center">
          <i class="fas fa-clock text-amber-600 text-sm lg:text-base"></i>
        </div>
      </div>
    </div>
  </div>

  <!-- Active Cases Grid -->
  <div class="cases-grid grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4 lg:gap-6 mb-6 lg:mb-8">
    <!-- Case Card 1 -->
    <div class="case-card bg-white rounded-lg shadow-sm border border-legal-ivory-400 overflow-hidden animate-slide-in">
      <div class="p-4 lg:p-5 legal-border">
        <div class="flex justify-between items-start mb-4">
          <div>
            <h3 class="font-bold text-legal-navy-900 text-base lg:text-lg">TechCorp Strategic Merger</h3>
            <p class="text-legal-navy-500 text-xs lg:text-sm">Matter #MC-2023-0876</p>
          </div>
          <span class="status-badge bg-legal-navy-100 text-legal-navy-800">Merger</span>
        </div>
        <div class="mb-4">
          <p class="text-legal-navy-700 text-xs lg:text-sm mb-2"><span class="font-medium">Client:</span> Global Ventures LLC</p>
          <p class="text-legal-navy-700 text-xs lg:text-sm"><span class="font-medium">Opened:</span> Oct 15, 2023</p>
        </div>
        <div class="mb-4">
          <div class="flex justify-between text-xs lg:text-sm mb-1">
            <span class="text-legal-navy-600">Progress</span>
            <span class="font-medium text-legal-navy-700">75%</span>
          </div>
          <div class="w-full bg-legal-ivory-300 rounded-full h-2">
            <div class="bg-legal-navy-600 h-2 rounded-full" style="width: 75%"></div>
          </div>
        </div>
        <div class="flex justify-between items-center">
          <span class="status-badge bg-amber-100 text-amber-800">Document Review</span>
          <button class="text-legal-burgundy-600 hover:text-legal-burgundy-800 font-medium text-xs lg:text-sm flex items-center">
            Open Project <i class="fas fa-arrow-right ml-1"></i>
          </button>
        </div>
      </div>
    </div>

    <!-- Case Card 2 -->
    <div class="case-card bg-white rounded-lg shadow-sm border border-legal-ivory-400 overflow-hidden animate-slide-in" style="animation-delay: 0.1s;">
      <div class="p-4 lg:p-5 legal-border">
        <div class="flex justify-between items-start mb-4">
          <div>
            <h3 class="font-bold text-legal-navy-900 text-base lg:text-lg">StartUp Innovations Acquisition</h3>
            <p class="text-legal-navy-500 text-xs lg:text-sm">Matter #AC-2023-0543</p>
          </div>
          <span class="status-badge bg-legal-burgundy-100 text-legal-burgundy-800">Acquisition</span>
        </div>
        <div class="mb-4">
          <p class="text-legal-navy-700 text-xs lg:text-sm mb-2"><span class="font-medium">Client:</span> Innovate Partners Inc.</p>
          <p class="text-legal-navy-700 text-xs lg:text-sm"><span class="font-medium">Opened:</span> Nov 3, 2023</p>
        </div>
        <div class="mb-4">
          <div class="flex justify-between text-xs lg:text-sm mb-1">
            <span class="text-legal-navy-600">Progress</span>
            <span class="font-medium text-legal-navy-700">45%</span>
          </div>
          <div class="w-full bg-legal-ivory-300 rounded-full h-2">
            <div class="bg-legal-burgundy-600 h-2 rounded-full" style="width: 45%"></div>
          </div>
        </div>
        <div class="flex justify-between items-center">
          <span class="status-badge bg-blue-100 text-blue-800">Due Diligence</span>
          <button class="text-legal-burgundy-600 hover:text-legal-burgundy-800 font-medium text-xs lg:text-sm flex items-center">
            Open Project <i class="fas fa-arrow-right ml-1"></i>
          </button>
        </div>
      </div>
    </div>

    <!-- Case Card 3 -->
    <div class="case-card bg-white rounded-lg shadow-sm border border-legal-ivory-400 overflow-hidden animate-slide-in" style="animation-delay: 0.2s;">
      <div class="p-4 lg:p-5 legal-border">
        <div class="flex justify-between items-start mb-4">
          <div>
            <h3 class="font-bold text-legal-navy-900 text-base lg:text-lg">Global Expansion Merger</h3>
            <p class="text-legal-navy-500 text-xs lg:text-sm">Matter #MC-2023-0921</p>
          </div>
          <span class="status-badge bg-legal-navy-100 text-legal-navy-800">Merger</span>
        </div>
        <div class="mb-4">
          <p class="text-legal-navy-700 text-xs lg:text-sm mb-2"><span class="font-medium">Client:</span> Enterprise Solutions Corp.</p>
          <p class="text-legal-navy-700 text-xs lg:text-sm"><span class="font-medium">Opened:</span> Sep 28, 2023</p>
        </div>
        <div class="mb-4">
          <div class="flex justify-between text-xs lg:text-sm mb-1">
            <span class="text-legal-navy-600">Progress</span>
            <span class="font-medium text-legal-navy-700">90%</span>
          </div>
          <div class="w-full bg-legal-ivory-300 rounded-full h-2">
            <div class="bg-green-500 h-2 rounded-full" style="width: 90%"></div>
          </div>
        </div>
        <div class="flex justify-between items-center">
          <span class="status-badge bg-green-100 text-green-800">Final Approval</span>
          <button class="text-legal-burgundy-600 hover:text-legal-burgundy-800 font-medium text-xs lg:text-sm flex items-center">
            Open Project <i class="fas fa-arrow-right ml-1"></i>
          </button>
        </div>
      </div>
    </div>

    <!-- Case Card 4 -->
    <div class="case-card bg-white rounded-lg shadow-sm border border-legal-ivory-400 overflow-hidden animate-slide-in" style="animation-delay: 0.3s;">
      <div class="p-4 lg:p-5 legal-border">
        <div class="flex justify-between items-start mb-4">
          <div>
            <h3 class="font-bold text-legal-navy-900 text-base lg:text-lg">Asset Purchase Agreement</h3>
            <p class="text-legal-navy-500 text-xs lg:text-sm">Matter #AC-2023-0678</p>
          </div>
          <span class="status-badge bg-legal-burgundy-100 text-legal-burgundy-800">Acquisition</span>
        </div>
        <div class="mb-4">
          <p class="text-legal-navy-700 text-xs lg:text-sm mb-2"><span class="font-medium">Client:</span> Capital Holdings Ltd.</p>
          <p class="text-legal-navy-700 text-xs lg:text-sm"><span class="font-medium">Opened:</span> Oct 10, 2023</p>
        </div>
        <div class="mb-4">
          <div class="flex justify-between text-xs lg:text-sm mb-1">
            <span class="text-legal-navy-600">Progress</span>
            <span class="font-medium text-legal-navy-700">60%</span>
          </div>
          <div class="w-full bg-legal-ivory-300 rounded-full h-2">
            <div class="bg-purple-500 h-2 rounded-full" style="width: 60%"></div>
          </div>
        </div>
        <div class="flex justify-between items-center">
          <span class="status-badge bg-purple-100 text-purple-800">Risk Assessment</span>
          <button class="text-legal-burgundy-600 hover:text-legal-burgundy-800 font-medium text-xs lg:text-sm flex items-center">
            Open Project <i class="fas fa-arrow-right ml-1"></i>
          </button>
        </div>
      </div>
    </div>

    <!-- Case Card 5 -->
    <div class="case-card bg-white rounded-lg shadow-sm border border-legal-ivory-400 overflow-hidden animate-slide-in" style="animation-delay: 0.4s;">
      <div class="p-4 lg:p-5 legal-border">
        <div class="flex justify-between items-start mb-4">
          <div>
            <h3 class="font-bold text-legal-navy-900 text-base lg:text-lg">Strategic Alliance Merger</h3>
            <p class="text-legal-navy-500 text-xs lg:text-sm">Matter #MC-2023-1015</p>
          </div>
          <span class="status-badge bg-legal-navy-100 text-legal-navy-800">Merger</span>
        </div>
        <div class="mb-4">
          <p class="text-legal-navy-700 text-xs lg:text-sm mb-2"><span class="font-medium">Client:</span> Market Leaders Inc.</p>
          <p class="text-legal-navy-700 text-xs lg:text-sm"><span class="font-medium">Opened:</span> Nov 8, 2023</p>
        </div>
        <div class="mb-4">
          <div class="flex justify-between text-xs lg:text-sm mb-1">
            <span class="text-legal-navy-600">Progress</span>
            <span class="font-medium text-legal-navy-700">55%</span>
          </div>
          <div class="w-full bg-legal-ivory-300 rounded-full h-2">
            <div class="bg-amber-500 h-2 rounded-full" style="width: 55%"></div>
          </div>
        </div>
        <div class="flex justify-between items-center">
          <span class="status-badge bg-amber-100 text-amber-800">Document Review</span>
          <button class="text-legal-burgundy-600 hover:text-legal-burgundy-800 font-medium text-xs lg:text-sm flex items-center">
            Open Project <i class="fas fa-arrow-right ml-1"></i>
          </button>
        </div>
      </div>
    </div>

    <!-- Case Card 6 -->
    <div class="case-card bg-white rounded-lg shadow-sm border border-legal-ivory-400 overflow-hidden animate-slide-in" style="animation-delay: 0.5s;">
      <div class="p-4 lg:p-5 legal-border">
        <div class="flex justify-between items-start mb-4">
          <div>
            <h3 class="font-bold text-legal-navy-900 text-base lg:text-lg">Tech Assets Acquisition</h3>
            <p class="text-legal-navy-500 text-xs lg:text-sm">Matter #AC-2023-0987</p>
          </div>
          <span class="status-badge bg-legal-burgundy-100 text-legal-burgundy-800">Acquisition</span>
        </div>
        <div class="mb-4">
          <p class="text-legal-navy-700 text-xs lg:text-sm mb-2"><span class="font-medium">Client:</span> Digital Ventures Co.</p>
          <p class="text-legal-navy-700 text-xs lg:text-sm"><span class="font-medium">Opened:</span> Nov 12, 2023</p>
        </div>
        <div class="mb-4">
          <div class="flex justify-between text-xs lg:text-sm mb-1">
            <span class="text-legal-navy-600">Progress</span>
            <span class="font-medium text-legal-navy-700">30%</span>
          </div>
          <div class="w-full bg-legal-ivory-300 rounded-full h-2">
            <div class="bg-blue-500 h-2 rounded-full" style="width: 30%"></div>
          </div>
        </div>
        <div class="flex justify-between items-center">
          <span class="status-badge bg-blue-100 text-blue-800">Initial Review</span>
          <button class="text-legal-burgundy-600 hover:text-legal-burgundy-800 font-medium text-xs lg:text-sm flex items-center">
            Open Project <i class="fas fa-arrow-right ml-1"></i>
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Completed Cases Section -->
  <div class="mt-8 lg:mt-12">
    <h2 class="text-xl lg:text-2xl font-bold text-primary font-serif mb-4 lg:mb-6">Completed Projects</h2>
    <div class="bg-white rounded-lg shadow-sm border border-legal-ivory-400 overflow-hidden">
      <div class="table-container overflow-x-auto">
        <table class="w-full">
          <thead class="bg-legal-ivory-100">
          <tr>
            <th class="px-4 lg:px-6 py-3 text-left text-xs font-medium text-legal-navy-500 uppercase tracking-wider">Project Name</th>
            <th class="px-4 lg:px-6 py-3 text-left text-xs font-medium text-legal-navy-500 uppercase tracking-wider">Type</th>
            <th class="px-4 lg:px-6 py-3 text-left text-xs font-medium text-legal-navy-500 uppercase tracking-wider">Client</th>
            <th class="px-4 lg:px-6 py-3 text-left text-xs font-medium text-legal-navy-500 uppercase tracking-wider">Completed Date</th>
            <th class="px-4 lg:px-6 py-3 text-left text-xs font-medium text-legal-navy-500 uppercase tracking-wider">Actions</th>
          </tr>
          </thead>
          <tbody class="divide-y divide-legal-ivory-300">
          <tr>
            <td class="px-4 lg:px-6 py-4 whitespace-nowrap">
              <div class="font-medium text-legal-navy-900">SmallTech Merger</div>
              <div class="text-xs text-legal-navy-500">Matter #MC-2023-0456</div>
            </td>
            <td class="px-4 lg:px-6 py-4 whitespace-nowrap">
              <span class="status-badge bg-legal-navy-100 text-legal-navy-800">Merger</span>
            </td>
            <td class="px-4 lg:px-6 py-4 whitespace-nowrap text-legal-navy-600">Innovation Partners</td>
            <td class="px-4 lg:px-6 py-4 whitespace-nowrap text-legal-navy-600">Oct 28, 2023</td>
            <td class="px-4 lg:px-6 py-4 whitespace-nowrap">
              <button class="text-legal-burgundy-600 hover:text-legal-burgundy-800 font-medium text-xs lg:text-sm flex items-center">
                View Details <i class="fas fa-external-link-alt ml-1"></i>
              </button>
            </td>
          </tr>
          <tr>
            <td class="px-4 lg:px-6 py-4 whitespace-nowrap">
              <div class="font-medium text-legal-navy-900">Business Unit Acquisition</div>
              <div class="text-xs text-legal-navy-500">Matter #AC-2023-0321</div>
            </td>
            <td class="px-4 lg:px-6 py-4 whitespace-nowrap">
              <span class="status-badge bg-legal-burgundy-100 text-legal-burgundy-800">Acquisition</span>
            </td>
            <td class="px-4 lg:px-6 py-4 whitespace-nowrap text-legal-navy-600">Corporate Holdings Inc.</td>
            <td class="px-4 lg:px-6 py-4 whitespace-nowrap text-legal-navy-600">Oct 15, 2023</td>
            <td class="px-4 lg:px-6 py-4 whitespace-nowrap">
              <button class="text-legal-burgundy-600 hover:text-legal-burgundy-800 font-medium text-xs lg:text-sm flex items-center">
                View Details <i class="fas fa-external-link-alt ml-1"></i>
              </button>
            </td>
          </tr>
          <tr>
            <td class="px-4 lg:px-6 py-4 whitespace-nowrap">
              <div class="font-medium text-legal-navy-900">Regional Expansion Merger</div>
              <div class="text-xs text-legal-navy-500">Matter #MC-2023-0211</div>
            </td>
            <td class="px-4 lg:px-6 py-4 whitespace-nowrap">
              <span class="status-badge bg-legal-navy-100 text-legal-navy-800">Merger</span>
            </td>
            <td class="px-4 lg:px-6 py-4 whitespace-nowrap text-legal-navy-600">Local Market Leaders</td>
            <td class="px-4 lg:px-6 py-4 whitespace-nowrap text-legal-navy-600">Sep 30, 2023</td>
            <td class="px-4 lg:px-6 py-4 whitespace-nowrap">
              <button class="text-legal-burgundy-600 hover:text-legal-burgundy-800 font-medium text-xs lg:text-sm flex items-center">
                View Details <i class="fas fa-external-link-alt ml-1"></i>
              </button>
            </td>
          </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
  <!-- New Case Modal -->
  <div id="newCaseModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden p-4">
    <div class="modal-content bg-white rounded-lg shadow-xl w-full max-w-3xl mx-auto max-h-[90vh] overflow-y-auto">
      <div class="px-4 lg:px-6 py-4 border-b border-legal-ivory-400 flex justify-between items-center sticky top-0 bg-white">
        <h3 class="text-lg lg:text-xl font-bold text-primary font-serif">Create New M&A Project</h3>
        <button id="closeModal" class="text-legal-navy-500 hover:text-legal-navy-700">
          <i class="fas fa-times text-xl"></i>
        </button>
      </div>
      <form th:action="@{~/create-project}" th:object="${formData}" method="post" id="newCaseForm" class="p-4 lg:p-6">
        <!-- Hidden field for transactionType -->
        <input type="hidden" id="transactionType" name="transactionType">

        <div class="mb-6">
          <h4 class="font-medium text-legal-navy-700 mb-3">Select Transaction Type</h4>
          <div class="case-type-grid grid grid-cols-1 md:grid-cols-2 gap-4">
            <div class="case-type-card bg-white border-2 border-legal-ivory-400 rounded-lg p-4 text-center cursor-pointer" data-type="merger">
              <div class="w-10 h-10 lg:w-12 lg:h-12 rounded-full bg-legal-navy-100 flex items-center justify-center text-legal-navy-600 mx-auto mb-3">
                <i class="fas fa-handshake text-lg lg:text-xl"></i>
              </div>
              <h5 class="font-bold text-legal-navy-900 text-sm lg:text-base">Merger</h5>
              <p class="text-legal-navy-500 text-xs lg:text-sm mt-1">Combine two companies into a new entity</p>
            </div>
            <div class="case-type-card bg-white border-2 border-legal-ivory-400 rounded-lg p-4 text-center cursor-pointer" data-type="acquisition">
              <div class="w-10 h-10 lg:w-12 lg:h-12 rounded-full bg-legal-burgundy-100 flex items-center justify-center text-legal-burgundy-600 mx-auto mb-3">
                <i class="fas fa-building text-lg lg:text-xl"></i>
              </div>
              <h5 class="font-bold text-legal-navy-900 text-sm lg:text-base">Acquisition</h5>
              <p class="text-legal-navy-500 text-xs lg:text-sm mt-1">One company purchases another</p>
            </div>
          </div>
          <div id="transactionTypeError" class="error-message">Please select a transaction type</div>
        </div>

        <div id="companyInfoSection" class="space-y-4">
          <h4 class="font-medium text-legal-navy-700 mb-3">Company Information</h4>

          <div class="form-row">
            <div class="form-col">
              <label class="block text-sm font-medium text-legal-navy-700 mb-1">Acquiring/Merging Company *</label>
              <input type="text" id="acquiringCompany" name="acquiringCompany" class="w-full px-3 py-2 border border-legal-ivory-400 rounded-lg focus:outline-none focus:ring-2 focus:ring-legal-burgundy-500 focus:border-transparent" placeholder="Enter company name" required>
              <div id="acquiringCompanyError" class="error-message">This field is required</div>
            </div>
            <div class="form-col">
              <label class="block text-sm font-medium text-legal-navy-700 mb-1">Target Company *</label>
              <input type="text" id="targetCompany" name="targetCompany" class="w-full px-3 py-2 border border-legal-ivory-400 rounded-lg focus:outline-none focus:ring-2 focus:ring-legal-burgundy-500 focus:border-transparent" placeholder="Enter company name" required>
              <div id="targetCompanyError" class="error-message">This field is required</div>
            </div>
          </div>

          <div class="form-row">
            <div class="form-col">
              <label class="block text-sm font-medium text-legal-navy-700 mb-1">Industry *</label>
              <select id="industry" name="industry" class="w-full px-3 py-2 border border-legal-ivory-400 rounded-lg focus:outline-none focus:ring-2 focus:ring-legal-burgundy-500 focus:border-transparent" required>
                <option value="">Select Industry</option>
                <option value="technology">Technology</option>
                <option value="healthcare">Healthcare</option>
                <option value="finance">Finance</option>
                <option value="manufacturing">Manufacturing</option>
                <option value="retail">Retail</option>
                <option value="energy">Energy</option>
                <option value="other">Other</option>
              </select>
              <div id="industryError" class="error-message">Please select an industry</div>
            </div>
          </div>

          <h4 class="font-medium text-legal-navy-700 mb-3 mt-6">Contact Information</h4>

          <div class="form-row">
            <div class="form-col">
              <label class="block text-sm font-medium text-legal-navy-700 mb-1">Acquiring Company Email *</label>
              <input type="email" id="acquiringEmail" name="acquiringEmail" class="w-full px-3 py-2 border border-legal-ivory-400 rounded-lg focus:outline-none focus:ring-2 focus:ring-legal-burgundy-500 focus:border-transparent" placeholder="Enter email address" required>
              <div id="acquiringEmailError" class="error-message">Please enter a valid email address</div>
            </div>
            <div class="form-col">
              <label class="block text-sm font-medium text-legal-navy-700 mb-1">Acquiring Company Phone *</label>
              <input type="tel" id="acquiringPhone" name="acquiringPhone" class="w-full px-3 py-2 border border-legal-ivory-400 rounded-lg focus:outline-none focus:ring-2 focus:ring-legal-burgundy-500 focus:border-transparent" placeholder="Enter phone number" required>
              <div id="acquiringPhoneError" class="error-message">Please enter a valid phone number</div>
            </div>
          </div>

          <div class="form-row">
            <div class="form-col">
              <label class="block text-sm font-medium text-legal-navy-700 mb-1">Target Company Email *</label>
              <input type="email" id="targetEmail" name="targetEmail" class="w-full px-3 py-2 border border-legal-ivory-400 rounded-lg focus:outline-none focus:ring-2 focus:ring-legal-burgundy-500 focus:border-transparent" placeholder="Enter email address" required>
              <div id="targetEmailError" class="error-message">Please enter a valid email address</div>
            </div>
            <div class="form-col">
              <label class="block text-sm font-medium text-legal-navy-700 mb-1">Target Company Phone *</label>
              <input type="tel" id="targetPhone" name="targetPhone" class="w-full px-3 py-2 border border-legal-ivory-400 rounded-lg focus:outline-none focus:ring-2 focus:ring-legal-burgundy-500 focus:border-transparent" placeholder="Enter phone number" required>
              <div id="targetPhoneError" class="error-message">Please enter a valid phone number</div>
            </div>
          </div>

          <div class="form-group">
            <label class="block text-sm font-medium text-legal-navy-700 mb-1">Transaction Description *</label>
            <textarea id="transactionDescription" name="transactionDescription" class="w-full px-3 py-2 border border-legal-ivory-400 rounded-lg focus:outline-none focus:ring-2 focus:ring-legal-burgundy-500 focus:border-transparent" rows="3" placeholder="Describe the purpose and goals of this transaction" required></textarea>
            <div id="transactionDescriptionError" class="error-message">This field is required</div>
          </div>
        </div>
      </form>
      <div class="px-4 lg:px-6 py-4 border-t border-legal-ivory-400 flex justify-end space-x-3 modal-buttons">
        <button id="cancelCase" class="px-4 py-2 border border-legal-navy-300 text-legal-navy-700 rounded-lg hover:bg-legal-navy-50 transition-colors duration-200">
          Cancel
        </button>
        <button id="createCase" class="px-4 py-2 bg-legal-burgundy-600 text-white rounded-lg hover:bg-legal-burgundy-700 transition-colors duration-200 flex items-center">
          <i class="fas fa-plus mr-2"></i> Create Project
        </button>
      </div>
    </div>
  </div>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
     // New Case Modal functionality
            const newCaseBtn = document.getElementById('newCaseBtn');
            const newCaseModal = document.getElementById('newCaseModal');
            const closeModal = document.getElementById('closeModal');
            const cancelCase = document.getElementById('cancelCase');
            const createCase = document.getElementById('createCase');
            const caseTypeCards = document.querySelectorAll('#newCaseModal .case-type-card');
            const form = document.getElementById('newCaseForm');
            const transactionTypeField = document.getElementById('transactionType');
            let selectedTransactionType = null;

            newCaseBtn.addEventListener('click', function() {
                newCaseModal.classList.remove('hidden');
                document.body.style.overflow = 'hidden';
            });

            function closeModalFunction() {
                newCaseModal.classList.add('hidden');
                document.body.style.overflow = 'auto';
                // Reset form
                form.reset();
                selectedTransactionType = null;
                transactionTypeField.value = '';
                caseTypeCards.forEach(c => c.classList.remove('selected'));
                // Clear error states
                clearErrors();
                // Re-enable create button when modal is closed
                enableCreateButton();
            }

            closeModal.addEventListener('click', closeModalFunction);
            cancelCase.addEventListener('click', closeModalFunction);

            // Close modal when clicking outside
            newCaseModal.addEventListener('click', function(event) {
                if (event.target === newCaseModal) {
                    closeModalFunction();
                }
            });

            // Case type selection in new case modal
            caseTypeCards.forEach(card => {
                card.addEventListener('click', function() {
                    caseTypeCards.forEach(c => c.classList.remove('selected'));
                    this.classList.add('selected');
                    selectedTransactionType = this.getAttribute('data-type');
                    transactionTypeField.value = selectedTransactionType;
                    document.getElementById('transactionTypeError').style.display = 'none';
                });
            });

            // Function to disable create button
            function disableCreateButton() {
                createCase.disabled = true;
                createCase.classList.add('btn-disabled');
                createCase.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i> Creating...';
            }

            // Function to enable create button
            function enableCreateButton() {
                createCase.disabled = false;
                createCase.classList.remove('btn-disabled');
                createCase.innerHTML = '<i class="fas fa-plus mr-2"></i> Create Project';
            }

            // Form validation
            function validateForm() {
                let isValid = true;

                // Validate transaction type
                if (!selectedTransactionType) {
                    document.getElementById('transactionTypeError').style.display = 'block';
                    isValid = false;
                } else {
                    document.getElementById('transactionTypeError').style.display = 'none';
                }

                // Validate required fields
                const requiredFields = [
                    'acquiringCompany', 'targetCompany', 'industry',
                    'acquiringEmail', 'acquiringPhone', 'targetEmail',
                    'targetPhone', 'transactionDescription'
                ];

                requiredFields.forEach(field => {
                    const element = document.getElementById(field);
                    const errorElement = document.getElementById(field + 'Error');

                    if (!element.value.trim()) {
                        element.classList.add('input-error');
                        errorElement.style.display = 'block';
                        isValid = false;
                    } else {
                        element.classList.remove('input-error');
                        errorElement.style.display = 'none';
                    }
                });

                // Validate email format
                const emailFields = ['acquiringEmail', 'targetEmail'];
                emailFields.forEach(field => {
                    const element = document.getElementById(field);
                    const errorElement = document.getElementById(field + 'Error');
                    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;

                    if (element.value.trim() && !emailRegex.test(element.value)) {
                        element.classList.add('input-error');
                        errorElement.textContent = 'Please enter a valid email address';
                        errorElement.style.display = 'block';
                        isValid = false;
                    }
                });

                return isValid;
            }

            function clearErrors() {
                const errorElements = document.querySelectorAll('.error-message');
                errorElements.forEach(element => {
                    element.style.display = 'none';
                });

                const inputElements = document.querySelectorAll('.input-error');
                inputElements.forEach(element => {
                    element.classList.remove('input-error');
                });
            }

            // Handle form submission
            createCase.addEventListener('click', function() {
                if (validateForm()) {
                    // Disable the button immediately when submission starts
                    disableCreateButton();

                    // Submit the form
                    form.submit();

                    // Optional: You can also add a timeout to prevent multiple submissions
                    // and re-enable the button after a certain time if submission fails
                    setTimeout(() => {
                        if (createCase.disabled) {
                            enableCreateButton();
                        }
                    }, 10000); // Re-enable after 10 seconds if still disabled
                }
            });
    });
  </script>
</main>
</body>
</html>